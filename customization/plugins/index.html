
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../basic/">
      
      
        <link rel="next" href="../../qa/">
      
      
      <link rel="icon" href="../../img/logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.18">
    
    
      
        <title>Plugins - IceNvim Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="brown" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#customizing-a-plugin" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="IceNvim Documentation" class="md-header__button md-logo" aria-label="IceNvim Documentation" data-md-component="logo">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IceNvim Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Plugins
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Shaobin-Jiang/IceNvim" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Shaobin-Jiang/IceNvim
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="IceNvim Documentation" class="md-nav__button md-logo" aria-label="IceNvim Documentation" data-md-component="logo">
      
  <img src="../../img/logo.png" alt="logo">

    </a>
    IceNvim Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Shaobin-Jiang/IceNvim" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Shaobin-Jiang/IceNvim
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Utilities
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Utilities
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Plugins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/keymaps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Keymaps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../utilities/commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Commands
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Customization
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Customization
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../get-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Plugins
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Plugins
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#customizing-a-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Customizing a Plugin
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lazy-loading-a-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Lazy Loading a Plugin
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lazy Loading a Plugin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iceload-event" class="md-nav__link">
    <span class="md-ellipsis">
      IceLoad Event
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iceafter-event" class="md-nav__link">
    <span class="md-ellipsis">
      IceAfter Event
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#language-specific-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Language-Specific Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snippets" class="md-nav__link">
    <span class="md-ellipsis">
      Snippets
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#colorschemes" class="md-nav__link">
    <span class="md-ellipsis">
      Colorschemes
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../qa/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Q&A
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#customizing-a-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Customizing a Plugin
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lazy-loading-a-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Lazy Loading a Plugin
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lazy Loading a Plugin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#iceload-event" class="md-nav__link">
    <span class="md-ellipsis">
      IceLoad Event
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#iceafter-event" class="md-nav__link">
    <span class="md-ellipsis">
      IceAfter Event
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#language-specific-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Language-Specific Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snippets" class="md-nav__link">
    <span class="md-ellipsis">
      Snippets
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#colorschemes" class="md-nav__link">
    <span class="md-ellipsis">
      Colorschemes
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Plugins</h1>

<p>You can customize the plugins via the <code>Ice.plugins</code> table.</p>
<h2 id="customizing-a-plugin">Customizing a Plugin<a class="headerlink" href="#customizing-a-plugin" title="Permanent link">&para;</a></h2>
<p>Each plugin installed corresponds to a key-value pair in <code>Ice.plugins</code>. For example, if you want to customize <code>hop.nvim</code>, just make modifications to <code>Ice.plugins.hop</code>. The names used in <code>Ice.plugins</code> can be found in the <a href="../../utilities/plugins">utilities/plugins</a> section, but with auto-completion enabled default, you can just navigate through the completion menu after typing <code>Ice.plugins.</code> to find the field name of a certain plugin.</p>
<p>Each value in these pairs is a lazy.nvim-compatible plugin spec. Pretty much everything is the same as when you are using lazy, but instead of returning it, we are storing it in <code>Ice.plugins</code>.</p>
<p>You can also remove a plugin by setting it to <code>nil</code> or add a plugin that is not present in IceNvim.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><span class="kd">local</span><span class="w"> </span><span class="nv">view</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">Ice</span><span class="p">.</span><span class="py">plugins</span><span class="p">[</span><span class="s2">&quot;nvim-tree&quot;</span><span class="p">].</span><span class="nv">opts</span><span class="p">.</span><span class="py">view</span>
<span class="nv">view</span><span class="p">.</span><span class="py">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="nv">view</span><span class="p">.</span><span class="py">relativenumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>

<span class="nv">Ice</span><span class="p">.</span><span class="py">plugins</span><span class="p">.</span><span class="py">bufferline</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="c1">-- disables bufferline</span>

<span class="c1">-- Field name does not matter when adding a new plugin</span>
<span class="nv">Ice</span><span class="p">.</span><span class="py">plugins</span><span class="p">.</span><span class="py">aaa</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="s2">&quot;folke/zen-mode.nvim&quot;</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Most of the time, IceNvim only uses configuration included by the original plugin. The only exception is nvim-treesitter.</p>
<p>In a recent update, nvim-treesitter removed the <code>ensure_installed</code> field. IceNvim, however, persists on using this field to automatically install parser. It is also highly unrecommended to use other ways to install parser, e.g., via the <code>TSInstall</code> command, because IceNvim has made special tweaks to only enable treesitter support for buffers whose filetype has a corresponding parser.</p>
<p>For example, you can install the parser for swift like this:</p>
<div class="highlight"><pre><span></span><code><span class="nb">table.insert</span><span class="p">(</span><span class="nv">Ice</span><span class="p">.</span><span class="py">plugins</span><span class="p">[</span><span class="s2">&quot;nvim-treesitter&quot;</span><span class="p">].</span><span class="nv">opts</span><span class="p">.</span><span class="py">ensure_installed</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;swift&quot;</span><span class="p">)</span>
</code></pre></div>
</div>
<h2 id="lazy-loading-a-plugin">Lazy Loading a Plugin<a class="headerlink" href="#lazy-loading-a-plugin" title="Permanent link">&para;</a></h2>
<p>If you are familiar with lazy.nvim, you should know about the <code>VeryLazy</code> event and how it is used to lazy load a plugin. IceNvim is built with performance in mind and also further provides some custom events to help boost loading.</p>
<h3 id="iceload-event"><code>IceLoad</code> Event<a class="headerlink" href="#iceload-event" title="Permanent link">&para;</a></h3>
<p><code>IceLoad</code> is triggered after the colorscheme is loaded and well after the <code>VeryLazy</code> event. However, if the current buffer is an unnamed buffer or it is the dashboard, the triggering of <code>IceLoad</code> will be postponed to the next time we enter a buffer. If the next buffer is still a dashboard / unnamed buffer, the triggering is further postponed.</p>
<p>Note that <code>IceLoad</code> is a custom event, so when using it in the lazy.nvim <code>event</code> field, it should be prefixed with a <code>User</code>. For example:</p>
<div class="highlight"><pre><span></span><code><span class="nv">Ice</span><span class="p">.</span><span class="py">plugins</span><span class="p">.</span><span class="py">bufferline</span><span class="p">.</span><span class="py">event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;User IceLoad&quot;</span>
</code></pre></div>
<h3 id="iceafter-event"><code>IceAfter</code> Event<a class="headerlink" href="#iceafter-event" title="Permanent link">&para;</a></h3>
<p><code>IceAfter</code> is intended for scenarios where the loading order of two plugins are critical.</p>
<p>For example, in IceNvim, rainbow-delimiter loads with nvim-treesitter as it requires a tree-sitter parser to work. Another plugin, indent-blankline, requires rainbow-delimiter to load first to enable colorful indentation markers. Therefore, IceNvim needs to ensure that indent-blankline loads after nvim-treesitter.</p>
<p>With <code>IceAfter</code>, this would be easy. You can just fire a <code>User IceAfter nvim-treesitter</code> event after nvim-treesitter is loaded and set the <code>event</code> for indent-blankline to <code>User IceAfter nvim-treesitter</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nv">Ice</span><span class="p">.</span><span class="py">plugins</span><span class="p">[</span><span class="s2">&quot;nvim-treesitter&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">-- ...</span>
<span class="w">    </span><span class="nv">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="w"> </span><span class="p">(</span><span class="nv">_</span><span class="p">,</span><span class="w"> </span><span class="nv">opts</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="c1">-- Setting up nvim-treesitter</span>
<span class="w">      </span><span class="nv">vim</span><span class="p">.</span><span class="py">api</span><span class="p">.</span><span class="nf">nvim_exec_autocmds</span><span class="p">(</span><span class="s2">&quot;User&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;IceAfter nvim-treesitter&quot;</span><span class="w"> </span><span class="p">})</span>
<span class="w">    </span><span class="p">},</span>
<span class="p">}</span>

<span class="nv">Ice</span><span class="p">.</span><span class="py">plugins</span><span class="p">[</span><span class="s2">&quot;indent-blankline&quot;</span><span class="p">].</span><span class="nv">event</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;User IceAfter nvim-treesitter&quot;</span>
</code></pre></div>
<p>IceNvim also fires the <code>IceAfter colorscheme</code> after the colorscheme is set, so you can also use <code>User IceAfter colorscheme</code> to load a plugin after the colorscheme is ready (differing from <code>IceLoad</code> in that this does not care about whether you are viewing the dashboard).</p>
<h2 id="language-specific-configuration">Language-Specific Configuration<a class="headerlink" href="#language-specific-configuration" title="Permanent link">&para;</a></h2>
<p>As mentioned above, you can disable any plugin by setting the corresponding field to <code>nil</code>. However, it would be better if you use a different approach with a few of them. These plugins are exclusively responsible for development in a certain language, and IceNvim has a different mechanism for managing them.</p>
<p>IceNvim supports development for these languages: Bash / C / C++ / C# / Flutter / Go / CSS / HTML / JavaScript / Typescript / JSON / Lua / Python / Typst / Rust. Among these, some are managed by plugins while others are supported via LSPs and formatters. To provide a universal interface to managing them, IceNvim introduces the <code>Ice.lsp</code> table. Each language corresponds to a field in this table:</p>
<ul>
<li><code>emmet-ls</code></li>
<li><code>pyright</code>: python</li>
<li><code>tinymist</code>: typst</li>
<li><code>bash-language-server</code></li>
<li><code>rust</code></li>
<li><code>gopls</code>: go</li>
<li><code>clangd</code>: C / C++</li>
<li><code>css-lsp</code></li>
<li><code>typescript-language-server</code></li>
<li><code>html-lsp</code></li>
<li><code>json-lsp</code></li>
<li><code>lua-language-server</code></li>
<li><code>omnisharp</code>: C#</li>
<li><code>flutter</code></li>
</ul>
<p>By default, only <code>lua-language-server</code> is enabled. To enable support for a language, just set <code>enabled = true</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nv">Ice</span><span class="p">.</span><span class="py">lsp</span><span class="p">.</span><span class="py">flutter</span><span class="p">.</span><span class="py">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</code></pre></div>
<p>And if you want to enable support for all these languages above, just do this:</p>
<div class="highlight"><pre><span></span><code><span class="kr">for</span><span class="w"> </span><span class="nv">_</span><span class="p">,</span><span class="w"> </span><span class="nv">lsp</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nb">pairs</span><span class="p">(</span><span class="nv">vim</span><span class="p">.</span><span class="nf">tbl_keys</span><span class="p">(</span><span class="nv">Ice</span><span class="p">.</span><span class="py">lsp</span><span class="p">))</span><span class="w"> </span><span class="kr">do</span>
<span class="w">    </span><span class="nv">Ice</span><span class="p">.</span><span class="py">lsp</span><span class="p">[</span><span class="nv">lsp</span><span class="p">].</span><span class="nv">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="kr">end</span>
</code></pre></div>
<p>Each language has a config table. If the table has <code>managed_by_plugin = true</code>, that language is managed by a plugin, and configuration for that language go to the corresponding <code>Ice.plugins</code> table:</p>
<ul>
<li>flutter: flutter-tools</li>
<li>rust: rustaceanvim</li>
</ul>
<p>Others are managed by LSPs and formatters. In this case, each table can optionally have a <code>formatter</code> and a <code>setup</code> field, where <code>formatter</code> is the name you can find by running the command <code>Mason</code> and <code>setup</code> is the configuration available to the language server. You can find out how to configure the latter value for specific languages <a href="https://github.com/neovim/nvim-lspconfig/blob/master/doc/configs.md">here</a> (most of the time you really do not need that, though).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>setup</code> value is actually of <code>vim.lsp.Config</code> type and so you can check out what values you can use by running <code>:h vim.lsp.Config</code>.</p>
<p>The exception, though, is the <code>on_attach</code> function. This function runs when the lsp is attached to the buffer and takes two arguments, which are the active client and the buffer id. For example, you can do something like this:</p>
<div class="highlight"><pre><span></span><code><span class="nv">Ice</span><span class="p">.</span><span class="py">lsp</span><span class="p">.</span><span class="py">omnisharp</span><span class="p">.</span><span class="py">setup</span><span class="p">.</span><span class="py">on_attach</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="nv">client</span><span class="p">,</span><span class="w"> </span><span class="nv">bufnr</span><span class="p">)</span>
<span class="w">    </span><span class="nv">client</span><span class="p">.</span><span class="py">server_capabilities</span><span class="p">.</span><span class="py">semanticTokensProvider</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">nil</span>
<span class="kr">end</span>
</code></pre></div>
<p>This is added for compatibility concerns since back in the days when people use nvim-lspconfig to configure language servers, such a value was provided. Neovim's new lsp api renders setting up lsp with nvim-lspconfig unnecessary, but as <code>on_attach</code> is not something provided by the former, migrating from one's old configuration would prove troublesome.</p>
<p>Just for some background reading, IceNvim actually implements <code>on_attach</code> via the <code>LspAttach</code> event. An alternative would have been to not implement this at all and instead ask the user to write their own autocmds, but that would be rather messy compared with the old way using <code>on_attach</code>.</p>
</div>
<p>You might notice that some of these languages have strange names. Why not just name it <code>bash</code> instead of <code>bash-language-server</code>? That is because these are names from <code>Mason</code> LSPs. Should you wish to add support for other languages without using a plugin, you should use the name of the LSP from <code>Mason</code> as its field name. For example, haskell's LSP is named <code>haskell-language-server</code> if you look it up in Mason. To add support for haskell, do this:</p>
<div class="highlight"><pre><span></span><code><span class="nv">Ice</span><span class="p">.</span><span class="py">lsp</span><span class="p">[</span><span class="s2">&quot;haskell-language-server&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span><span class="c1">-- `formatter` and `setup` can be omitted</span>
</code></pre></div>
<h2 id="snippets">Snippets<a class="headerlink" href="#snippets" title="Permanent link">&para;</a></h2>
<p>IceNvim supports VsCode-styled snippets. For example, if you want to create snippets that take effect in markdown files, you need to:</p>
<ul>
<li>create <code>custom/snippets/markdown.json</code></li>
<li>register it in <code>custom/snippets/package.json</code></li>
<li>write whatever code you like in there</li>
</ul>
<p>The <code>package.json</code> file looks something like this:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;contributes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;snippets&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;language&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;markdown&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./markdown.json&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>For more information on how to write such snippets, refer to the <a href="https://code.visualstudio.com/docs/editing/userdefinedsnippets">official documentation</a>.</p>
<h2 id="colorschemes">Colorschemes<a class="headerlink" href="#colorschemes" title="Permanent link">&para;</a></h2>
<p>Conventionally, we use the <code>colorscheme</code> command to set colorschemes. In IceNvim, as you ought to remember from the <a href="../../utilities/keymaps">utilities/keymaps</a> section, we use the <kbd>&lt;C-k&gt;&lt;C-t&gt;</kbd> keymap to open a colorscheme picker. This is quite handy in that it persists across sessions. Alternatively, you can use the <code>IceColorscheme</code> command to directly set the colorscheme from the command line.</p>
<p>For a colorscheme to appear in this picker or to work for the <code>IceColorscheme</code> command, you need not only to install the colorscheme plugin itself, but also register it in the <code>Ice.colorschemes</code> (notice the <code>s</code> at the end) table. Each table must have a <code>name</code> value which can be used with <code>:colorscheme name</code> and a <code>background</code> field that is either <code>"dark"</code> or <code>"light"</code>.</p>
<p>Optionally you can have a <code>setup</code> field that:</p>
<ul>
<li>can be passed to the plugin's setup function if it is a table</li>
<li>can be directly called when setting the colorscheme if it is a function</li>
</ul>
<p>And a <code>transparent</code> field that, if set to <code>true</code>, will trigger the <code>TransparentEnable</code> command when this colorscheme is used.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><span class="c1">-- gruvbox-light will appear in the colorscheme picker</span>
<span class="nv">Ice</span><span class="p">.</span><span class="py">colorschemes</span><span class="p">[</span><span class="s2">&quot;gruvbox-light&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;gruvbox&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nv">setup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nv">italic</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nv">strings</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">            </span><span class="nv">operators</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">            </span><span class="nv">comments</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nv">contrast</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;hard&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nv">background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;light&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1">-- When this colorscheme is used, the background will go transparent as it has `transparent = true`</span>
<span class="nv">Ice</span><span class="p">.</span><span class="py">colorschemes</span><span class="p">[</span><span class="s2">&quot;monet-dark&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nv">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;monet&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nv">transparent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nv">setup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kr">function</span><span class="p">()</span>
<span class="w">        </span><span class="kd">local</span><span class="w"> </span><span class="nv">palette</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">require</span><span class="w"> </span><span class="s2">&quot;monet.palette&quot;</span>
<span class="w">        </span><span class="nb">setmetatable</span><span class="p">(</span><span class="nv">palette</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nv">__index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">palette</span><span class="p">.</span><span class="py">defaults</span><span class="w"> </span><span class="p">})</span>
<span class="w">    </span><span class="kr">end</span><span class="p">,</span>
<span class="w">    </span><span class="nv">background</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;dark&quot;</span><span class="p">,</span>
<span class="p">},</span>
</code></pre></div>
<p>If you would like a code the colorscheme in your custom config files, you can also set the colorscheme via <code>Ice.colorscheme</code>. It is a string value that is one of the available colorschemes from <code>Ice.colorschemes</code>.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022-2025 Shaobin Jiang
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/Shaobin-Jiang/IceNvim" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>